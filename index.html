<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAR LANE GAME</title>
    <style>
        *{margin: 0; padding: 0;}
        .hide {
            display: none;
        }

        .car{
            width: 50px; height: 70px; background: red;
            position: absolute;
            top: 570px;
        }

        .gameArea{
            width: 600px;
            height: 100vh;
            background: #223344;
            margin: auto;
            position: relative;
            overflow: hidden;
        }

        .lines{
            width: 6px;
            height: 100px;
            background: white;
            position: absolute;
            margin-left: 194px;

        }

        .lines2{
            width: 6px;
            height: 100px;
            background: white;
            position: absolute;
            margin-left: 400px;

        }
    </style>
</head>
<body>
    
    <div class="carGame">
        <div class="score"></div>
        <div class="startScreen">
            <p>Press Here To Start <br>
                Arrow Keys To Move <br>
                If You Hit Another Car You Lose</p>
        </div>
        <div class="gameArea hide"> </div>
    </div>

    <script>

        const score = document.querySelector('.score');
        const startScreen = document.querySelector('.startScreen');
        const gameArea = document.querySelector('.gameArea');

        console.log(gameArea);

        startScreen.addEventListener('click', start);

        let player ={ speed : 5};

        let keys ={ ArrowUp :false, ArrowDown :false, ArrowLeft :false, ArrowRight :false}
        
        document.addEventListener('keydown', keyDown);
        document.addEventListener('keyup', keyUp);

        function keyDown(e){
            e.preventDefault();
            keys[e.key] = true;
            console.log(keys);
        }

        function keyUp(e){
            e.preventDefault();
            keys[e.key] = false;
            console.log(keys);
        }

        function movelines(){
            let lines = document.querySelectorAll('.lines');

            lines.forEach(function(item){

                if(item.y >= 700){
                    item.y -= 750;
                }

                item.y += player.speed;
                item.style.top = item.y + "px"; 
            })
        }
        
        // function movelinestwo(){
        //     let lines2 = document.querySelectorAll('.lines2');

        //     lines.forEach(function(item){

        //         if(item.y >= 700){
        //             item.y -= 750;
        //         }

        //         item.y += player.speed;
        //         item.style.top = item.y + "px"; 
        //     })
        // }

        function gamePlay(){
            let car=document.querySelector('.car');
            let road = gameArea.getBoundingClientRect();
            console.log(road)
            if (player.start){

                movelines();
                // movelinestwo();

                if(keys.ArrowLeft && player.x > 0 ) { player.x -= player.speed}
                if(keys.ArrowRight && player.x < (road.width- 50)) { player.x += player.speed}
                
                car.style.top = player.y + "px";
                car.style.left = player.x + "px";

            window.requestAnimationFrame(gamePlay);
             }
        }   

        function start(){

            gameArea.classList.remove('hide');
            startScreen.classList.add('hide');

            player.start =true;
            window.requestAnimationFrame(gamePlay);

            for(x=0; x<5; x++){
            let roadLine = document.createElement('div');
            roadLine.setAttribute('class', 'lines');
            roadLine.y= (x*150);
            roadLine.style.top = (x*150) + "px";
            gameArea.appendChild(roadLine);
            }

            for(x=0; x<5; x++){
            let roadLine = document.createElement('div');
            roadLine.setAttribute('class', 'lines2');
            roadLine.y= (x*150);
            roadLine.style.top = (x*150) + "px";
            gameArea.appendChild(roadLine);

            }


            let car= document.createElement('div');
            car.setAttribute('class', 'car');
            gameArea.appendChild(car);


            player.x = car.offsetLeft;
            player.y = car.offsetTop;

            console.log("top position" + car.offsetTop);
            console.log("left position" +car.offsetLeft);
        }


    </script>



</body>
</html>